<?xml version="1.0" encoding="UTF-8"?> 
<!-- Simulated Hex+delta arm -->
<launch>
  <arg name="sim" default="true"/>
  <arg name="viz" default = "true"/>

  <group if="$(arg sim)">
    <param name="model_name" value="Hex_delta"/>
    <include file="$(find tricopter)/launch/spawn_gazebo.launch"/>
  </group>

  <group if="$(arg viz)">
    <node type="rviz" name="rviz" pkg="rviz" args="-d $(find tricopter)/rviz/AAM.rviz"/>
  </group>
  
  <include file="$(find geometric_controller)/launch/geometric_controller.launch">
    <arg name="mav_name" default="Hex_delta"/>
    <arg name="command_input" default="2" />
    <arg name= "max_acc" default="2.0" />
    <arg name="Kp_x" default="5.0" />
    <arg name="Kp_y" default="5.0" />
    <arg name="Kp_z" default="12.0" />
    <arg name="Kv_x" default="1.7"/>
    <arg name="Kv_y" default="1.7"/>
    <arg name="Kv_z" default="15.0"/>
    <arg name="normalizedthrust_constant" default="0.05"/>
    <arg name="normalizedthrust_offset" default="0.02"/>
    <arg name="attctrl_constant" default="0.5"/>
  </include>

  <node pkg="trajectory_publisher" type="trajectory_publisher" name="trajectory_publisher" output="screen">
    <param name="trajectory_type" value="1" />
    <param name="shape_omega" value="0.1" />
    <param name="initpos_z" value="2.0" />
    <param name="reference_type" value="2" />
  </node>
  
  <node name="tooltip_sp_publisher" pkg="tricopter" type="tooltip_sp_from_geometric_ctrl.py" required="true" output="screen"/>
  
  <include file="$(find tricopter)/launch/stabilisation.launch"/>
</launch>