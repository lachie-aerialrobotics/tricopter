<?xml version="1.0" encoding="UTF-8"?> 
<launch>
    <arg name="bag" default = "false"/>

    <include file="$(find tricopter)/launch/lidar/lidar_mapping.launch">
        <arg name="lidar_type" default = "ouster"/>
        <arg name="relocalize" default = "false"/>
    </include>
    
    <include file="$(find tricopter)/launch/vicon/vicon_groundtruth.launch"/>

    <include file="$(find tricopter)/launch/flight_controller/mavros_node.launch"/>

    <include file="$(find delta_2)/launch/stabilise.launch">
        <arg name="sim" value="false"/>
    </include>

    <group if="$(arg bag)">
        <node pkg="rosbag" type="record" name="rosbag_record" args="-o $(env HOME)/bags/ -e '(.*)mavros(.*)' '(.*)vicon(.*)' /usb_cam/image_raw/compressed /Odometry '/platform/(.*)' '(.*)tooltip(.*)' '/servo(.*)' /tf /tf_static"/>
    </group>
</launch>